除去按照唯品会的修改kubernetes源码的方法, 是否有通过类似CRD的IPKPod实现方法?

Pod本身是kuber的底层对象, controller组件都是在Pod层面之上进行操作的, 普通的自定义CRD也一般也没有直接操作过Pod.

一些想法:

## 自定义IPKPod

自定义IPKPod, 同时把kubelet中所有与Pod相关的操作(比如oom检测, 存活检测, 挂载configmap, volume, 以及资源限制等等)全都拷贝过来, 否则实现的功能定然不会全面.

能不能越过kubelet直接调用kubelet下的docker接口创建IPKPod, 但是仍然注册为普通的Pod对象, 并且仍由kubelet管理?
    - 但是CRD只能拥有clientset的权限, 这个权限最多细致到Pod级别, 应该没有办法权限直接操作container.
    - 另外在CRD资源被创建完成的时候, 是否是被调度到某个节点来实施的? 我们怎么确定接下来创建的静态IPPod要部署在哪个节点?

## CNI

kubelet在创建pause容器完成后, 调用CNI获取IP, 同时在Pod删除时也会释放其拥有的IP. 除非同时修改CNI, 否则在Pod的移除与创建过程中无法保证地址不变.

那么换个思路, 我们可以定义一种CRD, 在接受到更新操作时, 只移除与新建其中包含的container容器, 而网络仍然使用原来的pause空间.

现在最重要的问题是, CRD是否有能力单独操作container.

## Patch

在创建Pod时无法指定IP, 但是可以尝试在更新Pod的保持已经获得的IP不变. 由CRD代理更新操作, 不移除原有的pause容器, 而是将业务container移除并新建一个更新镜像的container, 并且仍然使用原来的pause容器网络. 

这可能需要借助Pod的Patch接口, 不能确定是否能只修改container而保持pause不变.

